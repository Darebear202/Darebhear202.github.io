<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>çˆ¸çˆ¸ vs å°ç‹—é£è¡Œæ£‹</title>
  <style>
    body {
      margin: 0;
      padding: 10px;
      font-family: "Microsoft YaHei", sans-serif;
      background: linear-gradient(to bottom, #fff0f5, #ffe4e1);
      min-height: 100vh;
      text-align: center;
      color: #333;
    }
    h1 { color: #ff1493; margin: 10px 0; font-size: 1.6rem; }
    .safety { font-size: 0.9rem; color: #555; margin-bottom: 10px; line-height: 1.4; }
    #dice {
      font-size: 5rem;
      margin: 20px auto;
      color: #ff4500;
      font-weight: bold;
      width: 120px;
      height: 120px;
      line-height: 120px;
      background: white;
      border-radius: 16px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      transition: transform 0.3s;
    }
    #board {
      background: white;
      border-radius: 12px;
      padding: 10px;
      margin: 15px auto;
      max-width: 100%;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      gap: 4px;
    }
    .cell {
      aspect-ratio: 1;
      background: #e6f3ff;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      border: 1px solid #b3d9ff;
      cursor: pointer;
      transition: all 0.2s;
    }
    .cell:hover { background: #d1e8ff; }
    .cell.even { background: #ffebee; border-color: #ffcdd2; }
    .current { background: #ff69b4 !important; color: white; transform: scale(1.05); }
    .player {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      font-size: 0.85rem;
      line-height: 32px;
      text-align: center;
      color: white;
      font-weight: bold;
      margin: 3px 0;
    }
    .girl { background: #ff69b4; }
    .boy  { background: #1e90ff; }
    #task {
      background: white;
      border-radius: 12px;
      padding: 15px;
      margin: 15px auto;
      max-width: 100%;
      box-shadow: 0 4px 15px rgba(0,0,0,0.08);
      font-size: 1rem;
      line-height: 1.6;
      min-height: 100px;
    }
    button {
      padding: 16px 40px;
      font-size: 1.3rem;
      font-weight: bold;
      border: none;
      border-radius: 12px;
      color: white;
      cursor: pointer;
      margin: 15px 5px;
    }
    #rollBtn { background: #ff4757; }
    #rollBtn:hover { background: #ff6b81; transform: scale(1.05); }
    #resetBtn { background: #ffa502; }
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.6);
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .modal-content {
      background: white;
      padding: 30px;
      border-radius: 16px;
      max-width: 85%;
      max-height: 80%;
      overflow-y: auto;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      position: relative;
      font-size: 1.1rem;
      line-height: 1.7;
    }
    .close-btn {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 2.5rem;
      cursor: pointer;
      color: #555;
    }
    .close-btn:hover { color: #ff4757; }
  </style>
</head>
<body>
  <h1>çˆ¸çˆ¸ vs å°ç‹—é£è¡Œæ£‹</h1>
  <p class="safety">å®‰å…¨è¯ï¼šé»„ï¼ˆè½»ç‚¹/æ…¢ç‚¹ï¼‰ã€€çº¢ï¼ˆç«‹åˆ»åœï¼‰<br>æŒ‰ç©ºæ ¼é”®æˆ–ç‚¹å‡»æŒ‰é’®æŠ•éª°å­ï¼Œç¬‘åœºå°±æŠ±æŠ±ç»§ç»­å“¦ï½</p>

  <!-- éª°å­ -->
  <div id="dice">ğŸ²</div>

  <!-- æ£‹ç›˜ -->
  <div id="board">
    <div id="grid" class="grid"></div>
  </div>

  <!-- ä»»åŠ¡æç¤º -->
  <div id="task">
    ç‚¹å‡»â€œæ·éª°å­â€æˆ–æŒ‰ç©ºæ ¼é”®å¼€å§‹æ¸¸æˆï¼<br>
    å½“å‰è½®åˆ°ï¼šå°ç‹—
  </div>

  <!-- æŒ‰é’® -->
  <button id="rollBtn">æ·éª°å­ ğŸ² (è½®åˆ°å°ç‹—)</button>
  <button id="resetBtn">é‡ç½®æ¸¸æˆ</button>

  <!-- å¼¹çª— -->
  <div id="modal" class="modal" onclick="closeModal()">
    <div class="modal-content" onclick="event.stopPropagation()">
      <span class="close-btn" onclick="closeModal()">Ã—</span>
      <div id="modalText"></div>
    </div>
  </div>

  <script>
    // æ¸©å’Œç‰ˆæŒ‡ä»¤ï¼ˆç”¨çˆ¸çˆ¸/å°ç‹—/å°éªšbé£æ ¼ï¼Œé€‚åˆæ–°æ‰‹æƒ…ä¾£ï¼‰
    const tasks = [
      "èµ·ç‚¹ï¼šä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œç»§ç»­ç©ï½",
      "å°ç‹—è·ªä¸‹äº²çˆ¸çˆ¸è„šèƒŒ10ç§’ï¼Œè¯´â€œè°¢è°¢çˆ¸çˆ¸ï½â€",
      "å°ç‹—å¤§å£°é‡å¤â€œæˆ‘æ˜¯çˆ¸çˆ¸çš„å°ç‹—â€5æ¬¡ã€‚",
      "å°ç‹—ç¿˜å±è‚¡ï¼Œçˆ¸çˆ¸è½»æ‹5ä¸‹ï¼Œè¯´â€œå°ç‹—ä¹–ä¸ä¹–ï¼Ÿâ€",
      "å°ç‹—Må­—è…¿ä¿æŒ20ç§’ï¼Œè¯´â€œå°éªšbæ¹¿äº†å“¦çˆ¸çˆ¸â€ã€‚",
      "å°ç‹—æˆ´çœ¼ç½©ï¼Œçˆ¸çˆ¸ç”¨ç¾½æ¯›è½»è½»åˆ®å°è±†è±†/å¥¶å¤´30ç§’ã€‚",
      "å°ç‹—è·ªç€èˆ”çˆ¸çˆ¸æ‰‹æŒ‡20ç§’ï¼Œåƒèˆ”æ£’æ£’ç³–ã€‚",
      "å°ç‹—åŒæ‰‹ä¸¾é«˜ï¼Œçˆ¸çˆ¸æå¥¶å¤´5æ¬¡ã€‚",
      "çˆ¸çˆ¸åœ¨å°ç‹—å¥¶å­ä¸Šå†™â€œçˆ¸çˆ¸çš„â€å­—ã€‚",
      "å°ç‹—å¤¹è¡£å¤¹ä¿æŒ1åˆ†é’Ÿï¼Œè¯´â€œçˆ¸çˆ¸å¥½åå“¦ï½â€ã€‚",
      "å°ç‹—å¡å°è·³è›‹ï¼Œå¼€ä½æ¡£è·ªç€å¿30ç§’ã€‚",
      "å°ç‹—ç‹—çˆ¬å¼æ‘‡å±è‚¡ï¼Œæ±ªæ±ªå«3å£°ï¼Œè¯´â€œæ±ªæ±ªï¼çˆ¸çˆ¸çœ‹æˆ‘â€ã€‚",
      "å°ç‹—é•œå­å‰è½¬åœˆï¼Œè¯´â€œæˆ‘æ˜¯çˆ¸çˆ¸çš„å°éªšè´§â€ã€‚",
      "å°ç‹—æˆ´å£çƒå“¼å“¼ï¼Œçˆ¬åŠåœˆã€‚",
      "çˆ¸çˆ¸ä½æ¸©èœ¡æ»´å°ç‹—å¥¶å¤´3æ»´ï¼Œè¯´â€œçˆ¸çˆ¸è½»ç‚¹å“¦â€ã€‚",
      "å°ç‹—è‡ªæ‘¸åˆ°å¿«é«˜æ½®ï¼Œåœæ‰‹2æ¬¡ï¼Œè¯´â€œçˆ¸çˆ¸ä¸è®©é«˜æ½®â€ã€‚",
      "å°ç‹—æ°å¼€å‰åï¼Œçˆ¸çˆ¸æ£€æŸ¥+è½»æ‹ã€‚",
      "å°ç‹—è·ªç€æ§å¥¶å­ï¼Œè¯´â€œçˆ¸çˆ¸è¦æƒ©ç½šå°ç‹—å—â€ã€‚",
      "å°ç‹—ç”¨å˜´å¼çˆ¸çˆ¸å†…è£¤çˆ¬è¿‡æ¥å‘ˆä¸Šã€‚",
      "å°ç‹—è·ªå†™â€œæˆ‘æ˜¯çˆ¸çˆ¸çš„å°éªšbâ€20éã€‚",
      "å°ç‹—å¤¹å¥¶å¤¹æŒ‚é“ƒé“›ï¼Œèµ°ä¸€åœˆä¸å‡†å“å¤ªå¤§ã€‚",
      "çˆ¸çˆ¸ç”¨å†°å—è½»è½»æ»‘å°ç‹—å°è±†è±†/ä¸‹é¢30ç§’ã€‚",
      "å°ç‹—è·ªæ·±å–‰çˆ¸çˆ¸æ‰‹æŒ‡20ç§’ã€‚",
      "å°ç‹—ç¿˜å±è‚¡ï¼Œçˆ¸çˆ¸æ‹15ä¸‹ï¼Œå°ç‹—æ•°å‡ºæ¥ã€‚",
      "å°ç‹—é•œå­è¯´â€œå¹³æ—¶é‚£ä¹ˆä¹–ï¼Œå…¶å®æ˜¯çˆ¸çˆ¸çš„å°åç‹—â€ã€‚",
      "å°ç‹—ç‹—çˆ¬å¼å½“çˆ¸çˆ¸è„šå‡³20ç§’ã€‚",
      "å°ç‹—å¡è·³è›‹ï¼Œçˆ¸çˆ¸é¥æ§ä¸­æ¡£ï¼Œå°ç‹—è·ªç€å¿ã€‚",
      "å°ç‹—é‡å¤â€œæˆ‘æ˜¯çˆ¸çˆ¸çš„å°ç‹—/å°éªšbâ€10æ¬¡ã€‚",
      "å°ç‹—èˆŒå¤´èˆ”å¹²å‡€çˆ¸çˆ¸æ»´åˆ°åœ°ä¸Šçš„ä¸œè¥¿ã€‚",
      "å°ç‹—è·ªè‡ªæ‘¸ç»™çˆ¸çˆ¸çœ‹ï¼Œåˆ°è¾¹ç¼˜åœã€‚",
      "å°ç‹—ç¿˜å±è‚¡æ°å¼€ï¼Œçˆ¸çˆ¸æ‹ç…§ï¼ˆåªç»™çˆ¸çˆ¸çœ‹ï¼‰ã€‚",
      "å°ç‹—è¾¹ç¼˜å¿è€ï¼Œè¯´â€œæˆ‘æ˜¯çˆ¸çˆ¸çš„ç©å…·ï¼Œä¸å‡†é«˜æ½®â€ã€‚",
      "çˆ¸çˆ¸æ‰‹æŒ‡æµ…æ’å°ç‹—ä¸‹é¢ï¼Œè®©å°ç‹—æŠ–ã€‚",
      "å°ç‹—æˆ´é¼»å‹¾+å£çƒï¼Œå“¼å“¼çˆ¬è¡Œã€‚",
      "çˆ¸çˆ¸åœ¨å¤§è…¿å†…ä¾§å†™â€œçˆ¸çˆ¸çš„å°éªšbâ€ã€‚",
      "å°ç‹—è·ªæ·±å–‰çˆ¸çˆ¸30ç§’ã€‚",
      "çˆ¸çˆ¸èœ¡æ»´å°ç‹—ä¸‹é¢ï¼Œè¯´â€œä¸»äººçš„æ ‡è®°â€ã€‚",
      "å°ç‹—é çª—è·ªï¼Œçˆ¸çˆ¸ä»åè½»æ‘¸30ç§’ï¼ˆçª—å¸˜å…³ï¼‰ã€‚",
      "çˆ¸çˆ¸å‰åæµ…ç©å°ç‹—ï¼ˆæ‰‹æŒ‡ + å°è‚›å¡ï¼‰ã€‚",
      "çˆ¸çˆ¸è®©å°ç‹—é«˜æ½®ï¼Œè¯´â€œç»™çˆ¸çˆ¸çœ‹å°ç‹—é«˜æ½®çš„æ ·å­â€ã€‚",
      "çˆ¸çˆ¸è„šè½»è¸©å°ç‹—èƒ¸/ä¸‹é¢10ç§’ã€‚",
      "å°ç‹—é‡å¤â€œæˆ‘å¹³æ—¶é‚£ä¹ˆä¹–ï¼Œå…¶å®æ¬ çˆ¸çˆ¸æ”¶æ‹¾â€5æ¬¡ã€‚",
      "å°ç‹—å¤¹å¥¶å¤¹æ‹‰æ‰¯ï¼Œè¯´â€œå¥¶å­æ˜¯çˆ¸çˆ¸çš„â€ã€‚",
      "å°ç‹—å¡å°¾å·´è‚›å¡ï¼Œç‹—çˆ¬å¼æ‘‡å°¾å·´ã€‚",
      "å°ç‹—é•œå­è¯´æœ€ç¾è€»çš„å°ç‹—å¹»æƒ³ã€‚",
      "çˆ¸çˆ¸å†°ç«äº¤æ›¿å°ç‹—ä¸‹é¢ï¼ˆå†°å—æ»‘åæ¸©çƒ­æŠšæ‘¸ï¼‰ã€‚",
      "å°ç‹—è·ªæ±‚é¥¶ï¼Œè¯´â€œçˆ¸çˆ¸æƒ©ç½šå°ç‹—å§â€ã€‚",
      "å°ç‹—å†™â€œæˆ‘æ˜¯çˆ¸çˆ¸çš„å°éªšbâ€30éã€‚",
      "å°ç‹—å¡æŒ¯åŠ¨è‚›å¡ï¼Œå¼€ä¸­æ¡£è·ªç­‰çˆ¸çˆ¸ã€‚",
      "çˆ¸çˆ¸è¯´â€œæŠŠå°ç‹—å½“ç©å…·ç»™äººçœ‹â€ï¼Œå°ç‹—è¯´â€œæ˜¯çš„çˆ¸çˆ¸â€ã€‚",
      "çˆ¸çˆ¸è¾¹ç¼˜æ§åˆ¶å°ç‹—ï¼Œä¸å‡†é«˜æ½®ç›´åˆ°å…è®¸ã€‚",
      "çˆ¸çˆ¸å†³å®šç»„åˆç©å°ç‹—ï¼ˆè¨€è¯­+å§¿åŠ¿+é“å…·ï¼‰ã€‚",
      "ç»ˆç‚¹ï¼šèµ¢å®¶è¦æ±‚å½»åº•é‡Šæ”¾ï¼ˆçˆ¸çˆ¸å…è®¸å°ç‹—é«˜æ½®ï¼Œæˆ–å°ç‹—ä¾å¥‰çˆ¸çˆ¸ï¼‰"
    ];

    let dogPos = 0;
    let masterPos = 0;
    let turn = "å°ç‹—";

    const grid = document.getElementById('grid');
    const dice = document.getElementById('dice');
    const task = document.getElementById('task');
    const rollBtn = document.getElementById('rollBtn');
    const modal = document.createElement('div');
    modal.className = 'modal';
    modal.innerHTML = `
      <div class="modal-content">
        <span class="close-btn" onclick="closeModal()">Ã—</span>
        <div id="modalText"></div>
      </div>
    `;
    document.body.appendChild(modal);

    // ç»˜åˆ¶æ£‹ç›˜
    function drawBoard() {
      grid.innerHTML = '';
      let index = 0;
      let direction = 1;
      for (let row = 9; row >= 0; row--) {
        for (let col = direction === 1 ? 0 : 9; col >= 0 && col < 10; col += direction === 1 ? 1 : -1) {
          if (index >= 52) break;
          const cell = document.createElement('div');
          cell.className = 'cell' + (index % 2 === 0 ? '' : ' even');
          cell.innerHTML = `<div class="number">${index === 0 ? 'èµ·ç‚¹' : index === 51 ? 'ç»ˆç‚¹' : index + 1}</div>`;
          cell.onclick = () => showInstruction(index);
          grid.appendChild(cell);
          index++;
        }
        direction *= -1;
      }
    }

    // æ›´æ–°æ£‹å­
    function updatePieces() {
      document.querySelectorAll('.player').forEach(p => p.remove());
      const cells = document.querySelectorAll('.cell');
      if (cells[dogPos]) {
        const dog = document.createElement('div');
        dog.className = 'player girl';
        dog.textContent = 'å°ç‹—';
        cells[dogPos].appendChild(dog);
      }
      if (cells[masterPos]) {
        const master = document.createElement('div');
        master.className = 'player boy';
        master.textContent = 'ä¸»äºº';
        cells[masterPos].appendChild(master);
      }
    }

    // æ˜¾ç¤ºæŒ‡ä»¤å¼¹çª—
    function showInstruction(pos) {
      if (pos >= tasks.length) return;
      document.getElementById('modalText').innerHTML = `<strong>æ ¼å­ ${pos + 1}ï¼š</strong><br>${tasks[pos]}`;
      modal.style.display = 'flex';
    }

    // å…³é—­å¼¹çª—
    function closeModal() {
      modal.style.display = 'none';
    }

    modal.onclick = function(e) {
      if (e.target === modal) closeModal();
    };

    // æŠ•éª°å­
    function rollDice() {
      rollBtn.disabled = true;
      let count = 0;
      const interval = setInterval(() => {
        dice.textContent = Math.floor(Math.random() * 6) + 1;
        count++;
        if (count > 12) {
          clearInterval(interval);
          const final = Math.floor(Math.random() * 6) + 1;
          dice.textContent = final;
          movePiece(final);
          rollBtn.disabled = false;
        }
      }, 80);
    }

    function movePiece(steps) {
      let pos = turn === "å°ç‹—" ? dogPos : masterPos;
      let step = 0;
      const move = setInterval(() => {
        step++;
        pos++;
        if (turn === "å°ç‹—") dogPos = pos;
        else masterPos = pos;
        updatePieces();
        if (step >= steps || pos >= 51) {
          clearInterval(move);
          showInstruction(pos);
          task.innerHTML = `<strong>å½“å‰è½æ ¼ ${pos + 1}ï¼š</strong><br>${tasks[pos]}`;
          turn = turn === "å°ç‹—" ? "ä¸»äºº" : "å°ç‹—";
          rollBtn.textContent = `æ·éª°å­ ğŸ² (è½®åˆ°${turn})`;
          if (pos >= 51) {
            alert(`${turn === "ä¸»äºº" ? "å°ç‹—" : "ä¸»äºº"}åˆ°è¾¾ç»ˆç‚¹ï¼æ¸¸æˆç»“æŸï½`);
          }
        }
      }, 300);
    }

    document.getElementById('resetBtn').onclick = () => {
      dogPos = 0;
      masterPos = 0;
      turn = "å°ç‹—";
      rollBtn.textContent = "æ·éª°å­ ğŸ² (è½®åˆ°å°ç‹—)";
      updatePieces();
      task.innerHTML = "èµ·ç‚¹ï¼šä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œç»§ç»­ç©ï½<br>å½“å‰è½®åˆ°ï¼šå°ç‹—";
    };

    // ç»‘å®šç©ºæ ¼é”®å’ŒEnteré”®æŠ•éª°å­
    document.addEventListener('keydown', (e) => {
      if (e.code === 'Space' || e.code === 'Enter') {
        e.preventDefault();
        rollDice();
      }
    });

    rollBtn.onclick = rollDice;

    // ç‚¹å‡»æ ¼å­åå¤æ‰“å¼€å¼¹çª—
    document.getElementById('grid').addEventListener('click', (e) => {
      const cell = e.target.closest('.cell');
      if (!cell) return;
      const cells = document.querySelectorAll('.cell');
      const index = Array.from(cells).indexOf(cell);
      if (index >= 0) showInstruction(index);
    });

    drawBoard();
    updatePieces();
  </script>
</body>
</html>
